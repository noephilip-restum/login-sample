{"ast":null,"code":"import { NotificationManager } from 'react-notifications';\nimport validate from '../../utils/validate';\nimport { post } from '../../utils/api';\nimport { initialState } from '../reducers/signin_reducer';\nimport Cookies from 'js-cookie';\nexport const handleInput = (e, dispatchSignIn) => {\n  const {\n    name,\n    value\n  } = e.target;\n  dispatchSignIn({\n    type: 'FIELD',\n    fieldName: name,\n    payload: value\n  });\n};\nexport const handleSubmit = (event, stateSignIn, dispatchSignIn, history, types) => {\n  event.preventDefault();\n  const errors = validate(stateSignIn, types);\n  dispatchSignIn({\n    type: 'VALIDATE',\n    payload: {\n      errors,\n      isLoading: true\n    }\n  });\n\n  if (Object.keys(errors).length === 0) {\n    let ENDPOINT = types === 'sign-in' ? '/login' : '/users';\n    setTimeout(() => {\n      post(ENDPOINT, stateSignIn).then(res => {\n        localStorage.setItem('notification', 'Successfully Signed In!');\n        Cookies.set('name', 'value');\n        history.push('/main-page');\n      }).catch(error => {\n        types === 'sign-in' && NotificationManager.error(error.response.data);\n        dispatchSignIn({\n          type: 'VALIDATE',\n          payload: {\n            errors,\n            isLoading: false\n          }\n        });\n      });\n    }, 1000);\n  } else {\n    dispatchSignIn({\n      type: 'VALIDATE',\n      payload: {\n        errors,\n        isLoading: false\n      }\n    });\n  }\n};\nexport const handleReset = dispatchSignIn => {\n  dispatchSignIn({\n    type: 'RESET',\n    payload: initialState\n  });\n};","map":{"version":3,"sources":["/home/bs94/Desktop/login-sample/Client/src/contexts/functions/signin_functions.js"],"names":["NotificationManager","validate","post","initialState","Cookies","handleInput","e","dispatchSignIn","name","value","target","type","fieldName","payload","handleSubmit","event","stateSignIn","history","types","preventDefault","errors","isLoading","Object","keys","length","ENDPOINT","setTimeout","then","res","localStorage","setItem","set","push","catch","error","response","data","handleReset"],"mappings":"AAAA,SAASA,mBAAT,QAAoC,qBAApC;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,YAAT,QAA6B,4BAA7B;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,OAAO,MAAMC,WAAW,GAAG,CAACC,CAAD,EAAIC,cAAJ,KAAuB;AACjD,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAkBH,CAAC,CAACI,MAA1B;AACAH,EAAAA,cAAc,CAAC;AAAEI,IAAAA,IAAI,EAAE,OAAR;AAAiBC,IAAAA,SAAS,EAAEJ,IAA5B;AAAkCK,IAAAA,OAAO,EAAEJ;AAA3C,GAAD,CAAd;AACA,CAHM;AAKP,OAAO,MAAMK,YAAY,GAAG,CAC3BC,KAD2B,EAE3BC,WAF2B,EAG3BT,cAH2B,EAI3BU,OAJ2B,EAK3BC,KAL2B,KAMvB;AACJH,EAAAA,KAAK,CAACI,cAAN;AAEA,QAAMC,MAAM,GAAGnB,QAAQ,CAACe,WAAD,EAAcE,KAAd,CAAvB;AAEAX,EAAAA,cAAc,CAAC;AAAEI,IAAAA,IAAI,EAAE,UAAR;AAAoBE,IAAAA,OAAO,EAAE;AAAEO,MAAAA,MAAF;AAAUC,MAAAA,SAAS,EAAE;AAArB;AAA7B,GAAD,CAAd;;AAEA,MAAIC,MAAM,CAACC,IAAP,CAAYH,MAAZ,EAAoBI,MAApB,KAA+B,CAAnC,EAAsC;AACrC,QAAIC,QAAQ,GAAGP,KAAK,KAAK,SAAV,GAAsB,QAAtB,GAAiC,QAAhD;AACAQ,IAAAA,UAAU,CAAC,MAAM;AAChBxB,MAAAA,IAAI,CAACuB,QAAD,EAAWT,WAAX,CAAJ,CACEW,IADF,CACOC,GAAG,IAAI;AACZC,QAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqC,yBAArC;AACA1B,QAAAA,OAAO,CAAC2B,GAAR,CAAY,MAAZ,EAAoB,OAApB;AACAd,QAAAA,OAAO,CAACe,IAAR,CAAa,YAAb;AACA,OALF,EAMEC,KANF,CAMQC,KAAK,IAAI;AACfhB,QAAAA,KAAK,KAAK,SAAV,IAAuBlB,mBAAmB,CAACkC,KAApB,CAA0BA,KAAK,CAACC,QAAN,CAAeC,IAAzC,CAAvB;AACA7B,QAAAA,cAAc,CAAC;AACdI,UAAAA,IAAI,EAAE,UADQ;AAEdE,UAAAA,OAAO,EAAE;AAAEO,YAAAA,MAAF;AAAUC,YAAAA,SAAS,EAAE;AAArB;AAFK,SAAD,CAAd;AAIA,OAZF;AAaA,KAdS,EAcP,IAdO,CAAV;AAeA,GAjBD,MAiBO;AACNd,IAAAA,cAAc,CAAC;AAAEI,MAAAA,IAAI,EAAE,UAAR;AAAoBE,MAAAA,OAAO,EAAE;AAAEO,QAAAA,MAAF;AAAUC,QAAAA,SAAS,EAAE;AAArB;AAA7B,KAAD,CAAd;AACA;AACD,CAjCM;AAmCP,OAAO,MAAMgB,WAAW,GAAG9B,cAAc,IAAI;AAC5CA,EAAAA,cAAc,CAAC;AACdI,IAAAA,IAAI,EAAE,OADQ;AAEdE,IAAAA,OAAO,EAAEV;AAFK,GAAD,CAAd;AAIA,CALM","sourcesContent":["import { NotificationManager } from 'react-notifications';\nimport validate from '../../utils/validate';\nimport { post } from '../../utils/api';\nimport { initialState } from '../reducers/signin_reducer';\nimport Cookies from 'js-cookie';\n\nexport const handleInput = (e, dispatchSignIn) => {\n\tconst { name, value } = e.target;\n\tdispatchSignIn({ type: 'FIELD', fieldName: name, payload: value });\n};\n\nexport const handleSubmit = (\n\tevent,\n\tstateSignIn,\n\tdispatchSignIn,\n\thistory,\n\ttypes\n) => {\n\tevent.preventDefault();\n\n\tconst errors = validate(stateSignIn, types);\n\n\tdispatchSignIn({ type: 'VALIDATE', payload: { errors, isLoading: true } });\n\n\tif (Object.keys(errors).length === 0) {\n\t\tlet ENDPOINT = types === 'sign-in' ? '/login' : '/users';\n\t\tsetTimeout(() => {\n\t\t\tpost(ENDPOINT, stateSignIn)\n\t\t\t\t.then(res => {\n\t\t\t\t\tlocalStorage.setItem('notification', 'Successfully Signed In!');\n\t\t\t\t\tCookies.set('name', 'value');\n\t\t\t\t\thistory.push('/main-page');\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\ttypes === 'sign-in' && NotificationManager.error(error.response.data);\n\t\t\t\t\tdispatchSignIn({\n\t\t\t\t\t\ttype: 'VALIDATE',\n\t\t\t\t\t\tpayload: { errors, isLoading: false }\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}, 1000);\n\t} else {\n\t\tdispatchSignIn({ type: 'VALIDATE', payload: { errors, isLoading: false } });\n\t}\n};\n\nexport const handleReset = dispatchSignIn => {\n\tdispatchSignIn({\n\t\ttype: 'RESET',\n\t\tpayload: initialState\n\t});\n};\n"]},"metadata":{},"sourceType":"module"}